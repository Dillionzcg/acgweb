{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="grid grid-cols-12 gap-6 pb-8">

 <aside class="col-span-12 lg:col-span-3 space-y-6 animate__animated animate__fadeInLeft">
    <div class="glass-card p-6 shadow-xl border-l-4 border-pink-400">
        <h2 class="text-2xl acg-font text-pink-600 mb-4 flex items-center justify-between">
            <span><i class="fa-solid fa-fire-flame-curved mr-2"></i>番剧排行榜</span>
        </h2>
        <ul class="space-y-4">
            <li class="flex items-center group cursor-pointer">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-orange-500 text-white text-xs font-bold">1</span>
                <span class="flex-1 ml-3 text-gray-700 group-hover:text-pink-500 transition-colors">更衣人偶坠入爱河</span>
                <span class="text-xs text-gray-400">9.8w</span>
            </li>
            <li class="flex items-center group cursor-pointer">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-orange-400 text-white text-xs font-bold">2</span>
                <span class="flex-1 ml-3 text-gray-700 group-hover:text-pink-500 transition-colors">电锯人</span>
                <span class="text-xs text-gray-400">8.5w</span>
            </li>
            <li class="flex items-center group cursor-pointer">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-orange-300 text-white text-xs font-bold">3</span>
                <span class="flex-1 ml-3 text-gray-700 group-hover:text-pink-500 transition-colors">孤独摇滚</span>
                <span class="text-xs text-gray-400">7.2w</span>
            </li>
            <li class="flex items-center group cursor-pointer text-sm">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 text-xs">4</span>
                <span class="flex-1 ml-3 text-gray-600">间谍过家家</span>
                <span class="text-[10px] text-gray-400">6.8w</span>
            </li>
            <li class="flex items-center group cursor-pointer text-sm">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 text-xs">5</span>
                <span class="flex-1 ml-3 text-gray-600">赛博朋克：边缘行者</span>
                <span class="text-[10px] text-gray-400">6.1w</span>
            </li>
            <li class="flex items-center group cursor-pointer text-sm">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 text-xs">6</span>
                <span class="flex-1 ml-3 text-gray-600">利科莉丝 Lycoris</span>
                <span class="text-[10px] text-gray-400">5.9w</span>
            </li>
            <li class="flex items-center group cursor-pointer text-sm">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 text-xs">7</span>
                <span class="flex-1 ml-3 text-gray-600">咒术回战 第二季</span>
                <span class="text-[10px] text-gray-400">5.5w</span>
            </li>
            <li class="flex items-center group cursor-pointer text-sm">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 text-xs">8</span>
                <span class="flex-1 ml-3 text-gray-600">进击的巨人 最终季</span>
                <span class="text-[10px] text-gray-400">5.2w</span>
            </li>
            <li class="flex items-center group cursor-pointer text-sm">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 text-xs">9</span>
                <span class="flex-1 ml-3 text-gray-600">辉夜大小姐想让我告白</span>
                <span class="text-[10px] text-gray-400">4.9w</span>
            </li>
            <li class="flex items-center group cursor-pointer text-sm">
                <span class="w-6 h-6 flex items-center justify-center rounded-full bg-gray-200 text-gray-500 text-xs">10</span>
                <span class="flex-1 ml-3 text-gray-600">鬼灭之刃 锻刀村篇</span>
                <span class="text-[10px] text-gray-400">4.5w</span>
            </li>
        </ul>
        <button class="w-full mt-6 py-2 text-sm text-pink-500 border border-pink-200 rounded-xl hover:bg-pink-500 hover:text-white transition-all duration-300">
            查看详情 <i class="fa-solid fa-chevron-right text-[10px]"></i>
        </button>
    </div>

    <div class="glass-card p-6 shadow-xl border-l-4 border-purple-400 mt-6">
        <h2 class="text-2xl acg-font text-purple-600 mb-4 flex items-center">
            <span><i class="fa-solid fa-trophy mr-2"></i>Galgame榜</span>
        </h2>
        <div class="space-y-4">
            <div class="p-3 bg-white/50 rounded-xl hover:bg-white/80 transition-all border border-transparent hover:border-purple-200 cursor-pointer">
                <p class="text-sm font-bold text-gray-800">1. CLANNAD</p>
                <p class="text-[11px] text-purple-400 mt-1">写作“家族”，读作“人生”</p>
            </div>
            <div class="p-3 bg-white/50 rounded-xl hover:bg-white/80 transition-all border border-transparent hover:border-purple-200 cursor-pointer">
                <p class="text-sm font-bold text-gray-800">2. 命运石之门</p>
                <p class="text-[11px] text-purple-400 mt-1">这一切都是命运石之门的选择</p>
            </div>
            <div class="p-3 bg-white/50 rounded-xl hover:bg-white/80 transition-all border border-transparent hover:border-purple-200 cursor-pointer">
                <p class="text-sm font-bold text-gray-800">3. 白色相簿2</p>
                <p class="text-[11px] text-purple-400 mt-1">“又到了白色相簿的季节。。。”</p>
            </div>

            <ul class="mt-4 space-y-3 px-1">
                <li class="flex justify-between items-center group cursor-pointer">
                    <span class="text-sm text-gray-600 group-hover:text-purple-500">4. Muv-Luv Alternative</span>
                    <span class="text-[10px] text-gray-400 italic">9.6</span>
                </li>
                <li class="flex justify-between items-center group cursor-pointer">
                    <span class="text-sm text-gray-600 group-hover:text-purple-500">5. 魔法使之夜</span>
                    <span class="text-[10px] text-gray-400 italic">9.5</span>
                </li>
                <li class="flex justify-between items-center group cursor-pointer">
                    <span class="text-sm text-gray-600 group-hover:text-purple-500">6. Summer Pockets</span>
                    <span class="text-[10px] text-gray-400 italic">9.4</span>
                </li>
                <li class="flex justify-between items-center group cursor-pointer">
                    <span class="text-sm text-gray-600 group-hover:text-purple-500">7. 装甲恶鬼村正</span>
                    <span class="text-[10px] text-gray-400 italic">9.4</span>
                </li>
                <li class="flex justify-between items-center group cursor-pointer">
                    <span class="text-sm text-gray-600 group-hover:text-purple-500">8. 樱之刻</span>
                    <span class="text-[10px] text-gray-400 italic">9.3</span>
                </li>
                <li class="flex justify-between items-center group cursor-pointer">
                    <span class="text-sm text-gray-600 group-hover:text-purple-500">9. 拔作岛 (Nukitashi)</span>
                    <span class="text-[10px] text-gray-400 italic">9.2</span>
                </li>
                <li class="flex justify-between items-center group cursor-pointer">
                    <span class="text-sm text-gray-600 group-hover:text-purple-500">10. 命运停驻之夜 (FSN)</span>
                    <span class="text-[10px] text-gray-400 italic">9.2</span>
                </li>
            </ul>
        </div>
        <button class="w-full mt-6 py-2 text-sm text-purple-500 border border-purple-200 rounded-xl hover:bg-purple-500 hover:text-white transition-all duration-300">
            查看详情 <i class="fa-solid fa-chevron-right text-[10px]"></i>
        </button>
    </div>
</aside>

    <section class="col-span-12 lg:col-span-6 space-y-8">
        <div class="grid grid-cols-4 gap-4 animate__animated animate__fadeIn">

            <a href="#" class="col-span-2 h-48 relative group overflow-hidden rounded-2xl shadow-lg transition-all hover:-translate-y-1 bg-pink-900">
                <div class="absolute inset-0 bg-cover bg-center opacity-75 transition-all duration-700 group-hover:scale-110 group-hover:opacity-60"
                     style="background-image: url('/static/images/bg1.jpg');"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                <div class="relative h-full p-5 flex flex-col justify-end text-white">
                    <i class="fa-solid fa-house-chimney text-4xl opacity-30 absolute top-4 right-4 group-hover:rotate-12 transition-transform"></i>
                    <h3 class="text-2xl font-bold drop-shadow-lg">社区中心</h3>
                    <p class="text-sm opacity-80">次元居民的日常聚集地</p>
                </div>
            </a>

            <a href="#" class="col-span-2 h-48 relative group overflow-hidden rounded-2xl shadow-lg transition-all hover:-translate-y-1 bg-blue-900">
                <div class="absolute inset-0 bg-cover bg-center opacity-75 transition-all duration-700 group-hover:scale-110 group-hover:opacity-60"
                     style="background-image: url('/static/images/bg2.jpg');"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                <div class="relative h-full p-5 flex flex-col justify-end text-white">
                    <i class="fa-solid fa-newspaper text-4xl opacity-30 absolute top-4 right-4 group-hover:rotate-12 transition-transform"></i>
                    <h3 class="text-2xl font-bold drop-shadow-lg">资讯中心</h3>
                    <p class="text-sm opacity-80">掌握最新番剧/游戏情报</p>
                </div>
            </a>

            <a href="{% url 'masterpieces:works_center' %}" class="col-span-2 h-48 relative group overflow-hidden rounded-2xl shadow-lg transition-all hover:-translate-y-1 bg-orange-900">
                <div class="absolute inset-0 bg-cover bg-center opacity-75 transition-all duration-700 group-hover:scale-110 group-hover:opacity-60"
                     style="background-image: url('/static/images/bg3.jpg');"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                <div class="relative h-full p-5 flex flex-col justify-end text-white">
                    <i class="fa-solid fa-layer-group text-4xl opacity-30 absolute top-4 right-4 group-hover:rotate-12 transition-transform"></i>
                    <h3 class="text-2xl font-bold drop-shadow-lg">作品中心</h3>
                    <p class="text-sm opacity-80">发现与收藏心仪佳作</p>
                </div>
            </a>

            <a href="#" class="col-span-2 h-48 relative group overflow-hidden rounded-2xl shadow-lg transition-all hover:-translate-y-1 bg-purple-900">
                <div class="absolute inset-0 bg-cover bg-center opacity-75 transition-all duration-700 group-hover:scale-110 group-hover:opacity-60"
                     style="background-image: url('/static/images/bg4.jpg');"></div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"></div>
                <div class="relative h-full p-5 flex flex-col justify-end text-white">
                    <i class="fa-solid fa-palette text-4xl opacity-30 absolute top-4 right-4 group-hover:rotate-12 transition-transform"></i>
                    <h3 class="text-2xl font-bold drop-shadow-lg">插画中心</h3>
                    <p class="text-sm opacity-80">绝美大图与视觉盛宴</p>
                </div>
            </a>
        </div>

        <div class="space-y-4">
            <div class="flex items-center justify-between px-2">
                <h2 class="text-2xl acg-font text-gray-800"><i class="fa-solid fa-newspaper mr-2 text-blue-400"></i>热门资讯</h2>
                <a href="#" class="text-sm text-pink-400 hover:text-pink-600">更多资讯 <i class="fa-solid fa-angle-right"></i></a>
            </div>
            <div class="relative h-56 glass-card overflow-hidden group shadow-2xl">
                <img src="https://api.dujin.org/bing/1366.php" class="w-full h-full object-cover transition duration-700 group-hover:scale-110">
                <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent flex flex-col justify-end p-6">
                    <span class="w-fit px-3 py-1 bg-blue-500 text-white text-[10px] rounded-full mb-3 shadow-lg">HOT NEWS</span>
                    <h3 class="text-xl text-white font-bold group-hover:text-pink-300 transition-colors">本月最受期待：十月番剧霸权花落谁家？</h3>
                </div>
            </div>
        </div>

        <div class="space-y-4">
            <div class="flex items-center justify-between px-2">
                <h2 class="text-2xl acg-font text-gray-800"><i class="fa-solid fa-heart mr-2 text-pink-400"></i>热门作品</h2>
                <a href="{% url 'masterpieces:works_center' %}" class="text-sm text-pink-400 hover:text-pink-600">作品中心 <i class="fa-solid fa-angle-right"></i></a>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="glass-card p-4 hover:shadow-2xl transition-all cursor-pointer group">
                    <div class="h-40 bg-gray-200 rounded-xl mb-3 overflow-hidden relative">
                        <img src="https://picsum.photos/400/300?random=1" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        <div class="absolute top-2 right-2 bg-black/50 backdrop-blur-md text-white text-[10px] px-2 py-1 rounded">TV动画</div>
                    </div>
                    <h4 class="font-bold text-lg text-gray-800 group-hover:text-pink-500">孤独摇滚！</h4>
                    <p class="text-sm text-gray-500 line-clamp-2 mt-1">每一位社恐的福音，用音乐治愈世界...</p>
                    <div class="mt-4 flex justify-between items-center text-xs">
                        <span class="text-orange-500 font-bold">⭐ 9.9分</span>
                        <span class="text-gray-400"><i class="fa-regular fa-comment-dots mr-1"></i>12.5k</span>
                    </div>
                </div>
                <div class="glass-card p-4 hover:shadow-2xl transition-all cursor-pointer group">
                    <div class="h-40 bg-gray-200 rounded-xl mb-3 overflow-hidden relative">
                        <img src="https://picsum.photos/400/300?random=2" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                        <div class="absolute top-2 right-2 bg-black/50 backdrop-blur-md text-white text-[10px] px-2 py-1 rounded">Visual Novel</div>
                    </div>
                    <h4 class="font-bold text-lg text-gray-800 group-hover:text-blue-500">Summer Pockets</h4>
                    <p class="text-sm text-gray-500 line-clamp-2 mt-1">在那个永恒的夏天，我们相遇并告别。</p>
                    <div class="mt-4 flex justify-between items-center text-xs">
                        <span class="text-blue-500 font-bold">推荐指数: 🔥🔥🔥</span>
                        <span class="text-gray-400"><i class="fa-regular fa-comment-dots mr-1"></i>5.2k</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <aside class="col-span-12 lg:col-span-3 space-y-6 animate__animated animate__fadeInRight">
        <div class="glass-card p-6 text-center shadow-xl border-t-4 border-pink-300">
            <div class="w-20 h-20 bg-pink-100 rounded-full mx-auto mb-4 border-4 border-white shadow-md overflow-hidden relative group">
                {% if user.is_authenticated %}
                    {% if user.avatar %}
                        <img src="{{ user.avatar.url }}" class="w-full h-full object-cover">
                    {% else %}
                        <img src="{% static 'images/default_head.png' %}" class="w-full h-full object-cover">
                    {% endif %}
                {% else %}
                    <img src="{% static 'images/default_head.png' %}" class="w-full h-full object-cover">
                {% endif %}
            </div>
            <h3 class="font-bold text-xl text-gray-800">
                {% if user.is_authenticated %} {{ user.username }} {% else %} 游客君 {% endif %}
            </h3>
            <p class="text-xs text-gray-500 mt-2 italic px-2">
                {% if user.is_authenticated %} {{ user.bio|default:"暂无签名，快去设置吧~" }} {% else %} 登录后解锁发布功能 {% endif %}
            </p>
            {% if user.is_authenticated %}
                <a href="{% url 'user_center' %}" class="block mt-4 w-full py-2 bg-gradient-to-r from-pink-400 to-purple-500 text-white rounded-lg shadow-lg hover:scale-[1.05] transition-all text-sm font-bold">
                    进入次元中心
                </a>
            {% else %}
                <a href="{% url 'login' %}" class="block mt-4 w-full py-2 bg-gradient-to-r from-pink-400 to-purple-500 text-white rounded-lg shadow-lg hover:opacity-90 transition-all text-sm font-bold">
                    立即登录
                </a>
            {% endif %}
        </div>
        <div class="glass-card shadow-xl overflow-hidden border-t-4 border-blue-400 flex flex-col min-h-[450px]">
            <div class="p-4 bg-gradient-to-r from-blue-50/50 to-white border-b border-blue-100 flex items-center justify-between">
                <div class="flex items-center">
                    <i class="fa-solid fa-wand-magic-sparkles text-blue-500 mr-2"></i>
                    <h2 class="text-lg font-bold text-gray-700 acg-font">为你推荐</h2>
                </div>
            </div>

            <div class="flex border-b border-gray-50 bg-white/30 text-[11px] font-bold" id="recommend-tabs">
                <button onclick="switchTab('friends')" class="tab-btn flex-1 py-3 text-blue-600 border-b-2 border-blue-500 bg-white/50 transition-all" data-target="friends">好友</button>
                <button onclick="switchTab('works')" class="tab-btn flex-1 py-3 text-gray-400 hover:text-blue-400 transition-all" data-target="works">作品</button>
                <button onclick="switchTab('images')" class="tab-btn flex-1 py-3 text-gray-400 hover:text-blue-400 transition-all" data-target="images">插画</button>
            </div>

            <div class="flex-1 relative">

                <div id="tab-friends" class="tab-content flex flex-col items-center justify-center p-8 h-full">
                    <div class="w-16 h-16 bg-blue-50 rounded-full flex items-center justify-center mb-4">
                        <i class="fa-solid fa-user-plus text-2xl text-blue-200"></i>
                    </div>
                    <h4 class="text-gray-700 font-bold text-sm mb-1">暂无好友推荐</h4>
                    <p class="text-[10px] text-gray-400 text-center">空荡荡的波段...<br>快去社区中心结识志同道合的小伙伴吧</p>
                    <a href="#" class="mt-6 px-5 py-1.5 bg-blue-500 text-white text-[10px] rounded-full shadow-md hover:bg-blue-600 transition-all">前往社区</a>
                </div>

                <div id="tab-works" class="tab-content hidden flex flex-col items-center justify-center p-8 h-full">
                    <div class="w-16 h-16 bg-orange-50 rounded-full flex items-center justify-center mb-4">
                        <i class="fa-solid fa-book text-2xl text-orange-200"></i>
                    </div>
                    <h4 class="text-gray-700 font-bold text-sm mb-1">作品库收集中</h4>
                    <p class="text-[10px] text-gray-400 text-center">这里还是一片荒野...<br>点亮星星收藏你最爱的番剧或游戏</p>
                    <a href="#" class="mt-6 px-5 py-1.5 bg-orange-400 text-white text-[10px] rounded-full shadow-md hover:bg-orange-500 transition-all">发现作品</a>
                </div>

                <div id="tab-images" class="tab-content hidden flex flex-col items-center justify-center p-8 h-full">
                    <div class="w-16 h-16 bg-purple-50 rounded-full flex items-center justify-center mb-4">
                        <i class="fa-solid fa-image text-2xl text-purple-200"></i>
                    </div>
                    <h4 class="text-gray-700 font-bold text-sm mb-1">画师尚未投稿</h4>
                    <p class="text-[10px] text-gray-400 text-center">大触们还在闭关修炼...<br>点击进入插画中心寻找灵感</p>
                    <a href="#" class="mt-6 px-5 py-1.5 bg-purple-500 text-white text-[10px] rounded-full shadow-md hover:bg-purple-600 transition-all">进入图库</a>
                </div>

            </div>
        </div>
        <div class="glass-card p-6 shadow-lg">
            <h2 class="text-xl acg-font text-blue-600 mb-4 flex items-center">
                <i class="fa-solid fa-bullhorn mr-2"></i> 资讯站公告
            </h2>
            <div class="space-y-4">
                <div class="group cursor-pointer">
                    <div class="flex items-center justify-between mb-1">
                        <span class="text-[10px] bg-pink-100 text-pink-500 px-2 py-0.5 rounded">置顶</span>
                        <span class="text-[10px] text-gray-400">2023-10-24</span>
                    </div>
                    <p class="text-sm text-gray-700 group-hover:text-pink-500 transition-colors line-clamp-1">关于社区文明发帖的规范公告</p>
                </div>
                <div class="group cursor-pointer">
                    <div class="flex items-center justify-between mb-1">
                        <span class="text-[10px] bg-blue-100 text-blue-500 px-2 py-0.5 rounded">活动</span>
                        <span class="text-[10px] text-gray-400">2023-10-22</span>
                    </div>
                    <p class="text-sm text-gray-700 group-hover:text-blue-500 transition-colors line-clamp-1">十月番剧安利大赛正式开启！</p>
                </div>
                <div class="group cursor-pointer border-t border-gray-100 pt-3">
                    <p class="text-xs text-center text-gray-400 hover:text-pink-400">查看更多公告...</p>
                </div>
            </div>
        </div>
    </aside>

</div>
    <script>
function switchTab(tabName) {
    // 1. 隐藏所有内容
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.add('hidden');
    });

    // 2. 显示选中的内容
    document.getElementById('tab-' + tabName).classList.remove('hidden');

    // 3. 更新按钮样式
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('text-blue-600', 'border-b-2', 'border-blue-500', 'bg-white/50');
        btn.classList.add('text-gray-400');
    });

    // 4. 为当前点击的按钮添加激活样式
    const activeBtn = document.querySelector(`[data-target="${tabName}"]`);
    activeBtn.classList.add('text-blue-600', 'border-b-2', 'border-blue-500', 'bg-white/50');
    activeBtn.classList.remove('text-gray-400');
}
</script>
{% endblock %}